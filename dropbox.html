<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>    Dropbox
</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
            <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/normalize.css">
        <link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/main.css">
	<link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/tipuesearch/tipuesearch.css">

    <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/blog.css">
    <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/github.css">
        <link href="https://visibilityspots.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="visibilityspots Atom Feed" />
        <link href="https://visibilityspots.github.io/blog/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="visibilityspots RSS Feed" />
        <script src="https://visibilityspots.github.io/blog/theme/js/vendor/modernizr-2.6.2.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <div id="wrapper">
<header id="sidebar" class="side-shadow">
    <hgroup id="site-header">
    <a id="site-title" href="https://visibilityspots.github.io/blog"><h1>visibilityspots <i class="icon-dashboard"></i></h1></a>
        <p id="site-desc"> Linux & Open-Source enthusiast | Scouting | Longboarding </p>
    </hgroup>
    <form id="searchform" action="https://visibilityspots.github.io/blog/search.html" onsubmit="return (this.elements['q'].value.length > 0)">
	        <input id="searchbox" type="text" name="q" size="12" placeholder="search">
    </form>
    <nav>
        <ul id="nav-links">
                <li><a href="https://visibilityspots.github.io/blog/">Blog</a></li>
                <li><a href="https://visibilityspots.github.io/blog/pages/profile.html">Profile</a></li>
                <li><a href="https://visibilityspots.github.io/blog/pages/projects.html">Projects</a></li>
                <li><a href="https://visibilityspots.github.io/blog/pages/tools.html">Tools</a></li>
                <li><a href="https://visibilityspots.github.io/blog/pages/contact.html">Contact</a></li>
        </ul>
    </nav>
    Categories:
      <ul>
	<li><a href="https://visibilityspots.github.io/blog/category/android.html">android</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/apple.html">apple</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/automation.html">automation</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/cloud.html">cloud</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/conferences.html">conferences</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/containers.html">containers</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/home-automation.html">home-automation</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/linux.html">linux</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/networking.html">networking</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/other.html">other</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/php.html">php</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/puppet.html">puppet</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/security.html">security</a></li>
      </ul>
<footer id="site-info">
  <a href="http://creativecommons.org/licenses/by-nc/2.0/be/deed.nl">License</a> | 2009 - 2021 <a href="https://visibilityspots.github.io/blog">visibilityspots.github.io/blog</a> | Generated by <a href="http://getpelican.com/" target="pelican">Pelican</a> | Hosted at <a href="https://pages.github.com/" target="github pages">github pages</a> | <a href="https://visibilityspots.github.io/blog/feeds/all.atom.xml" rel="alternate">Atom</a> feed
</footer></header>
    <div id="post-container">
        <ol id="post-list">
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <a href="https://visibilityspots.github.io/blog/dropbox.html" rel="bookmark"><h1>Dropbox</h1></a>
<div><p>takes 1 minute to read</p></div>                        <time class="post-time" datetime="2012-10-15T18:00:00+02:00" pubdate>
                            last modified at Mon 15 October 2012
                        </time>
                    </header>
                    <section class="post-content">
                        <p>Reading this article will go through the process I went through configuring multiple dropbox accounts on my centos machine (one personal and one for work) and encrypting them both using encfs.</p>
<p>That way I'm sure dropbox can't read the data stored into it. Because no I don't trust anybody on the cloud!</p>
<p>In the first part I will configure 2 dropbox services using a CentOS 6 Desktop, in the second part I will encrypt those 2 dropbox services using encfs.</p>
<p>The first account you can just install and configure the normal way provided by <a class="reference external" href="https://www.dropbox.com/install">dropbox</a>&nbsp;itself. Here I configured my work account on so all work related data will be stored in my home/Dropbox folder later on.</p>
<p>Once this is done we have to install the 2nd service and configure the personal account into it. To do this we have to create 2 new folders into your home directory.
One named .dropbox-personal where the 2nd dropbox service configuration files will be stored in. And another named for example Personal where the actual Dropbox folder for this 2nd account will be written to.</p>
<p>When you created those 2 fresh directories you can open a terminal and run the command</p>
<pre class="literal-block">
HOME=$HOME/.dropbox-personal /usr/bin/dropbox start -i
</pre>
<p>so the 2nd dropbox service will be started from this newly .dropbox-personal folder.</p>
<p>Follow the wizard, but make sure you enter a CUSTOM folder (e.g. ~/Personal) where you point to the 2nd new folder you've created ~/Dropbox-personal/!</p>
<p>To start this 2nd instance of dropbox we have to create a script which will start this instance and add it to our Startup programs.</p>
<p>Create an executable (chmod +x file.sh) .sh file with this content:</p>
<pre class="literal-block">
#!/bin/bash HOME=$HOME/.dropbox-personal /usr/bin/dropbox start
</pre>
<p>And add a new entry via System -&gt; Preferences -&gt; Startup Applications for this script.</p>
<p>Or you can copy the script.sh file to your /usr/bin/ director without the extension so your script will be available as a command in your terminal.</p>
<p>So right now we have 2 dropbox accounts uploading the folders ~/Dropbox for work related stuff and ~/Personal/Dropbox/ for personal data.</p>
<p>Next step will be encryption for those folders. By encrypting your dropbox folders we make sure our data will not be readable when stored on the dropbox servers and sent over the internet.
To accomplish this encryption I opted for encfs. On a CentOS machine you can install it using yum:</p>
<pre class="literal-block">
sudo yum install fuse-encfs
</pre>
<p>Once the package is installed we can configure our encrypted volumes.
The way this encryption will work is quite simple. You have 2 folders, a private folder which is the working directory where you can edit delete and create files and folders to work with.
All content in your private folder will be encrypted to you encrypted folder which will be synchronized to the dropbox online services.</p>
<p>So in our case we have to create 4 folders, 2 for our work account (~/Private &amp; ~/Dropbox/.encrypted) and 2 for our personal account (~/Personal/Private-personal &amp; ~/Personal/Dropbox/.encrypted-personal).</p>
<p>Once those folders are created we can configure the encfs volumes:</p>
<pre class="literal-block">
encfs ~/Dropbox/.encrypted ~/Private encfs ~/Personal/Dropbox/.encrypted-personal ~/Personal/Private-personal
</pre>
<p>where you can use the paranoia mode to encrypt your files</p>
<pre class="literal-block">
enter &quot;p&quot; for pre-configured paranoia mode
</pre>
<p>with your chosen password. When you created your encrypted volumes you can administer your data in the private folders, this data will be encrypted automatically to your .encrypted* folders which will be uploaded to dropbox.
When you install dropbox on another computer you also have to install encfs on it to decrypt your files.</p>
<p>In the dropbox folders you can see there is a&nbsp;.encfs6.xml file. To be completely sure dropbox can't do anything with your files you can exclude this file to be synchronized online.
But make some copies of it to a secure place (usb stick or your phone) before you continue. This can be done with the command:</p>
<pre class="literal-block">
dropbox exclude add ~/Dropbox/.encrypted/.encfs6.xml dropbox exclude list
</pre>
<p>And remove the .encfs6.xml file from the online dropbox account using the web service.</p>
<p>For the 2nd service you have to use the following commands:</p>
<pre class="literal-block">
HOME=$HOME/.dropbox-personal /usr/bin/dropbox exclude add ~/Personal/Dropbox/.encrypted-personal/.encfs6.xml HOME=$HOME/.dropbox-personal /usr/bin/dropbox exclude list``
</pre>
<p>On every computer where you install encfs to decrypt those files you have to copy the proper .encfs6.xml file in the .encrypted* folders so you can decrypt the encfs volumes.</p>
<p>Be aware you can't use your encrypted files using the dropbox web interface. On your android phone you can install <a class="reference external" href="https://code.google.com/p/cryptonite/">cryptonite</a> which will decrypt your files so you can use them on your phone.</p>
<p>I created a Startup script which can decrypt and umount the encrypted folders and shared it on <a class="reference external" href="https://github.com/visibilityspots/scripts">github</a> by adding the script with the preferred parameters to your Startup
programs you have to fill in the passwords each time you log in so your folders are decrypted and you can start using them.
(or add the script to your /usr/bin/ folder named encryption so you can handle it as a command called encryption as you named it in your terminal)</p>
<p>You can also use this setup to share for example your evolution mails via dropbox on an encrypted way so nobody can read your mails except your on your different computers with evolution. (Make sure the
evolution versions match and point your evolution working directory to the private one using symlinks - e.g. ln -s ~/Private/.evolution ~/.evolution)</p>
<p>Feel free to add patches, send remarks about this topic.) by adding the script with the preferred parameters to your Startup programs you have to fill in the passwords each time you log in so your folders are
decrypted and you can start using them.</p>
<p>Resources:</p>
<ul class="simple">
<li><a class="reference external" href="http://maketecheasier.com/run-multiple-dropbox-accounts-in-mac-and-linux/2010/05/24">http://maketecheasier.com</a></li>
<li><a class="reference external" href="https://help.ubuntu.com/community/EncryptedPrivateDirectory">https://help.ubuntu.com</a></li>
<li><a class="reference external" href="http://janaksingh.com/blog/dropbox-encryption-install-encfs-linux-encrypt-decrypt-dropbox-content-realtime-155">http://janaksingh.com</a></li>
</ul>

                    </section>
                    <hr/>
                    <aside class="post-meta">
                        <p>Category: <a href="https://visibilityspots.github.io/blog/category/linux.html">linux</a></p>
                        <p>Tags: <a href="https://visibilityspots.github.io/blog/tag/accounts.html">accounts</a>, <a href="https://visibilityspots.github.io/blog/tag/centos.html">centOS</a>, <a href="https://visibilityspots.github.io/blog/tag/dropbox.html">dropbox</a>, <a href="https://visibilityspots.github.io/blog/tag/encfs.html">encfs</a>, <a href="https://visibilityspots.github.io/blog/tag/encryption.html">encryption</a>, <a href="https://visibilityspots.github.io/blog/tag/multiple.html">multiple</a>, <a href="https://visibilityspots.github.io/blog/tag/security.html">security</a>, </p>
                    </aside>
                    <hr/>
<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'visibilityspots';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
                </article>
            </li>
        </ol>
    </div>
        </div>

        <script src="https://visibilityspots.github.io/blog/theme/js/main.js"></script>
    </body>
</html>