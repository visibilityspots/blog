<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>    Mkdocs documentation
</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
            <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/normalize.css">
        <link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/main.css">
        <link rel="stylesheet" media="screen and (prefers-color-scheme: dark)" href="https://files.stork-search.net/dark.css">

    <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/blog.css">
    <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/github.css">
        <link href="https://visibilityspots.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="visibilityspots Atom Feed" />
        <link href="https://visibilityspots.github.io/blog/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="visibilityspots RSS Feed" />
        <script src="https://visibilityspots.github.io/blog/theme/js/vendor/modernizr-2.6.2.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <div id="wrapper">
<header id="sidebar" class="side-shadow">
    <hgroup id="site-header">
    <a id="site-title" href="https://visibilityspots.github.io/blog"><h1>visibilityspots <i class="icon-dashboard"></i></h1></a>
        <p id="site-desc"> Linux & Open-Source enthusiast | Scouting | Longboarding </p>
    </hgroup>
    <input data-stork="sitesearch" id="searchbox" type="text" size="12" placeholder="search">
    <div data-stork="sitesearch-output"></div>

    <nav>
        <ul id="nav-links">
                <li><a href="https://visibilityspots.github.io/blog/">Blog</a></li>
                <li><a href="https://visibilityspots.github.io/blog/pages/profile.html">Profile</a></li>
                <li><a href="https://visibilityspots.github.io/blog/pages/projects.html">Projects</a></li>
                <li><a href="https://visibilityspots.github.io/blog/pages/tools.html">Tools</a></li>
                <li><a href="https://visibilityspots.github.io/blog/pages/contact.html">Contact</a></li>
        </ul>
    </nav>
    Categories:
      <ul>
        <li><a href="https://visibilityspots.github.io/blog/category/android.html">android</a></li>
        <li><a href="https://visibilityspots.github.io/blog/category/apple.html">apple</a></li>
        <li><a href="https://visibilityspots.github.io/blog/category/automation.html">automation</a></li>
        <li><a href="https://visibilityspots.github.io/blog/category/cloud.html">cloud</a></li>
        <li><a href="https://visibilityspots.github.io/blog/category/conferences.html">conferences</a></li>
        <li><a href="https://visibilityspots.github.io/blog/category/containers.html">containers</a></li>
        <li><a href="https://visibilityspots.github.io/blog/category/home-automation.html">home-automation</a></li>
        <li><a href="https://visibilityspots.github.io/blog/category/linux.html">linux</a></li>
        <li><a href="https://visibilityspots.github.io/blog/category/networking.html">networking</a></li>
        <li><a href="https://visibilityspots.github.io/blog/category/other.html">other</a></li>
        <li><a href="https://visibilityspots.github.io/blog/category/php.html">php</a></li>
        <li><a href="https://visibilityspots.github.io/blog/category/puppet.html">puppet</a></li>
        <li><a href="https://visibilityspots.github.io/blog/category/security.html">security</a></li>
      </ul>
<footer id="site-info">
  <a href="http://creativecommons.org/licenses/by-nc/2.0/be/deed.nl">License</a> | 2009 - 2025 <a href="https://visibilityspots.github.io/blog">visibilityspots.github.io/blog</a> | Generated by <a href="http://getpelican.com/" target="pelican">Pelican</a> | Hosted at <a href="https://pages.github.com/" target="github pages">github pages</a> | <a href="https://visibilityspots.github.io/blog/feeds/all.atom.xml" rel="alternate">Atom</a> feed
</footer></header>
    <div id="post-container">
        <ol id="post-list">
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <a href="https://visibilityspots.github.io/blog/mkdocs.html" rel="bookmark"><h1>Mkdocs documentation</h1></a>
<div><p>takes 1 minute to read</p></div>                        <time class="post-time" datetime="2014-04-20T17:00:00+02:00" pubdate>
                            last modified at Tue 02 May 2017
                        </time>
                    </header>
                    <section class="post-content">
                        <p>To make our and other lives less painful writing documentation is a good start to decrease the level of frustration when working on a shared project.</p>
<p>It's a common feeling writing documentation isn't something we are all waiting for to do. In an effort to make it easier for all of us an automatically way of deployment can be managed by our good friend jenkins in combination with docker.</p>
<p>The details about this flow is been described on this page. After reading through this documentation section you should be aware of the general deployment idea so you can implement it yourself and start writing documentation without any hassle.</p>
<h2>Mark down</h2>
<p>The goal is that you write documentation using mark down in a git repository, that way you can easily write together with others on the same documentation in a structured and versionned manner.</p>
<p>By using mark down we can easily convert those md documents to whatever you want and gives us an easy <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">syntax</a> to write documentation.</p>
<h2>Mkdocs</h2>
<p>Using <a href="http://mkdocs.org">mkdocs</a> a nice and easy manner has been found to generate a clean static html site based on the md files without much effort.</p>
<p>The installation is quite straight forward using python-pip:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>mkdocs
</code></pre></div>

<p>Once the installation process ended successfully you should be able to run the mkdocs engine:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>mkdocs<span class="w"> </span><span class="nb">help</span>
<span class="w">  </span>mkdocs<span class="w"> </span><span class="o">[</span>help<span class="p">|</span>new<span class="p">|</span>build<span class="p">|</span>serve<span class="o">]</span><span class="w"> </span><span class="o">{</span>options<span class="o">}</span>
</code></pre></div>

<h3>Usage</h3>
<p>Starting a new project is easy as hell:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>mkdocs<span class="w"> </span>new<span class="w"> </span>PROJECT-NAME
Creating<span class="w"> </span>project<span class="w"> </span>directory:<span class="w"> </span>PROJECT-NAME
Writing<span class="w"> </span>config<span class="w"> </span>file:<span class="w"> </span>PROJECT-NAME/mkdocs.yml
Writing<span class="w"> </span>initial<span class="w"> </span>docs:<span class="w"> </span>PROJECT-NAME/docs/index.md
</code></pre></div>

<p>the mkdocs structure is automatically generated as you can see in a brand new PROJECT-NAME directory:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ls<span class="w"> </span>PROJECT-NAME
docs<span class="w">  </span>mkdocs.yml
</code></pre></div>

<p>As you could see the repository exists of a docs directory containing the md files with the actual content and a mkdocs.yml file which is used to generate the sites index and menus</p>
<h4>local preview</h4>
<p>The first thing you could do is to build a local preview of the html structure so you have a real time preview of your modifications:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>PROJECT-NAME
$<span class="w"> </span>mkdocs<span class="w"> </span>serve
Running<span class="w"> </span>at:<span class="w"> </span>http://127.0.0.1:8000/
Live<span class="w"> </span>reload<span class="w"> </span>enabled.
Hold<span class="w"> </span>ctrl+c<span class="w"> </span>to<span class="w"> </span>quit.
</code></pre></div>

<p>When the mkdocs engine started successfully you could surf through your browser to <a href="http://localhost:8000">localhost:8000</a> and start watching the preview of your documentation on your local machine.</p>
<p>You should see a site/ directory has been generated containing the static html structure based on the docs/ md files.</p>
<p>After editing the md files and saving your modifications they should appear immediately on your local preview when the mkdocs server command is running.</p>
<h4>mkdocs.yaml</h4>
<p>As mentioned a mkdocs.yml file manages the index and menus of the site:</p>
<div class="highlight"><pre><span></span><code><span class="nt">site_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">My Docs</span>
<span class="nt">pages</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">index.md</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Home</span><span class="p p-Indicator">]</span>
<span class="c1">#theme: readthedocs</span>
</code></pre></div>

<h4>images</h4>
<p>Using images is quite easy, add your jpg, png or whatever files into the docs/img/ directory and reference to them in your md file as follow:</p>
<div class="highlight"><pre><span></span><code>!<span class="o">[</span>reference<span class="w"> </span>name<span class="o">](</span>img/imagefile.png<span class="o">)</span>
</code></pre></div>

<h3>Migrate existing documentation</h3>
<p>Using <a href="http://johnmacfarlane.net/pandoc/">pandoc</a> we could convert the majority of source files to markdown:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pandoc<span class="w"> </span>source.txt<span class="w"> </span>-f<span class="w"> </span>textile<span class="w"> </span>-t<span class="w"> </span>markdown<span class="w"> </span>-o<span class="w"> </span>output.md
</code></pre></div>

<p>Be aware you should review the generated output cause the human intellect still cannot be fully replaced by bits and bytes..</p>
<h2>Automation</h2>
<p>Once you've written the documentation in markdown, checked locally the layout and ran through a spell checker you could push them to git repository.</p>
<p>A jenkins build flow could be triggered using a <a href="http://git-scm.com/book/en/Customizing-Git-Git-Hooks">post-receive</a> hooks.</p>
<p>This flow on his turn will orchestrates some jobs:</p>
<ul>
<li>build ( "package-doc" )</li>
<li>build ( "repository" )</li>
<li>build ( "deploy-package",  packagename: "infra-doc", node: "webserver.domain.org")</li>
</ul>
<h3>Package-doc</h3>
<p>This job will use the git repository as a source to generate the html site/ directory by the mkdocs build command.</p>
<p>(tip: create a .gitignore file in the root of your git repo with <em>.~ </em>.swp and site/ so you don't upload swap files or you local generated site/ directory)</p>
<p>The nifty tool <a href="https://github.com/jordansissel/fpm">fpm</a> is used to generate an rpm package of that freshly created site/ directory to be deployed on hosting.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-f<span class="w"> </span>*.rpm<span class="w"> </span><span class="o">]</span>
<span class="w"> </span><span class="k">then</span>
<span class="w">     </span>rm<span class="w"> </span>*.rpm
<span class="w"> </span><span class="k">fi</span>

<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;site/&quot;</span><span class="w"> </span><span class="o">]</span>
<span class="w"> </span><span class="k">then</span>
<span class="w">     </span>rm<span class="w"> </span>site/<span class="w"> </span>-rf
<span class="w"> </span><span class="k">fi</span>

<span class="w"> </span>mkdocs<span class="w"> </span>build
<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>site/

<span class="w"> </span><span class="nv">RELEASE</span><span class="o">=</span><span class="sb">`</span>git<span class="w"> </span>rev-list<span class="w"> </span>--all<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l<span class="sb">`</span>

<span class="w"> </span>fpm<span class="w"> </span>-s<span class="w"> </span>dir<span class="w"> </span>-t<span class="w"> </span>rpm<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--name<span class="w"> </span><span class="s2">&quot;doc&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--version<span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--iteration<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">RELEASE</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--architecture<span class="w"> </span>noarch<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--prefix<span class="w"> </span>/var/www/<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--rpm-user<span class="w"> </span>apache<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--rpm-group<span class="w"> </span>apache<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--description<span class="w"> </span><span class="s1">&#39;The html files for documentation&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--maintainer<span class="w"> </span><span class="s1">&#39;Jenkins&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--epoch<span class="w"> </span><span class="s1">&#39;1&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>.

<span class="w"> </span>mv<span class="w"> </span>*.rpm<span class="w"> </span>../
<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>..

<span class="w"> </span>rpm<span class="w"> </span>-qlp<span class="w"> </span>*.rpm
</code></pre></div>

<p>A brand new shiny rpm package artifact then could be archived so the next step in the flow could use it.</p>
<h3>Repository</h3>
<p>The rpm artifact of the package-doc job could then be used to deploy on your favorite repository service, from <a href="http://createrepo.baseurl.org/">createrepo</a>, <a href="http://pulpproject.org">pulp</a>, <a href="https://github.com/immobilienscout24/yum-repo-server">yum-repo-server</a>, <a href="https://github.com/dnbert/prm">prm</a> to <a href="http://packagecloud.io">packagecloud</a> so the next job can be triggered to install/update the package on your webserver</p>
<h3>Deploy-package</h3>
<p>Next you could configure a jenkins job which for examples logs in through ssh and installs the package you've pushed to your repository.</p>
<h3>Configuration management</h3>
<p>Instead of the deployment-package job you could also use a configuration management tool which does the installation/upgrade for you ;)</p>
<h2>Docker</h2>
<p>Instead of installing the tools on your local machine or your build server you could also opt for docker, there are a lot of preconfigured docker containers available on the internet or you could start making your own docker file relying on for example a centos official docker container and only mount your markdown documents into the container. That way you have more control over the environment and releases independent of the host system both by the ones who are writing the documentation as your build system..</p>
<h2>Useful links</h2>
<ul>
<li><a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">Adam-p</a></li>
<li><a href="https://help.github.com/articles/markdown-basics">Basics</a></li>
<li><a href="http://mkdocs.org">mkdocs</a></li>
<li><a href="http://johnmacfarlane.net/pandoc/">pandoc</a></li>
<li><a href="http://www.gnu.org/software/ispell/ispell.html">ispell</a></li>
</ul>
                    </section>
                    <hr/>
                    <aside class="post-meta">
                        <p>Category: <a href="https://visibilityspots.github.io/blog/category/linux.html">linux</a></p>
                        <p>Tags: <a href="https://visibilityspots.github.io/blog/tag/documentation.html">documentation</a>, <a href="https://visibilityspots.github.io/blog/tag/mkdoc.html">mkdoc</a>, <a href="https://visibilityspots.github.io/blog/tag/automation.html">automation</a>, <a href="https://visibilityspots.github.io/blog/tag/pandoc.html">pandoc</a>, <a href="https://visibilityspots.github.io/blog/tag/markdown.html">markdown</a>, <a href="https://visibilityspots.github.io/blog/tag/html.html">html</a>, <a href="https://visibilityspots.github.io/blog/tag/linux.html">linux</a>, </p>
                    </aside>
                    <hr/>
<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'visibilityspots';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
                </article>
            </li>
        </ol>
    </div>
        </div>

        <script src="https://visibilityspots.github.io/blog/theme/js/main.js"></script>
        <script src="https://files.stork-search.net/releases/v1.2.1/stork.js"></script>
        <script>
            stork.register("sitesearch", "https://visibilityspots.github.io/blog/search-index.st")
        </script>
    </body>
</html>