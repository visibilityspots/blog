<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>    Piaware on a nomad cluster
</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
            <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/normalize.css">
        <link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/main.css">
	<link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/tipuesearch/tipuesearch.css">

    <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/blog.css">
    <link rel="stylesheet" href="https://visibilityspots.github.io/blog/theme/css/github.css">
        <link href="https://visibilityspots.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="visibilityspots Atom Feed" />
        <link href="https://visibilityspots.github.io/blog/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="visibilityspots RSS Feed" />
        <script src="https://visibilityspots.github.io/blog/theme/js/vendor/modernizr-2.6.2.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <div id="wrapper">
<header id="sidebar" class="side-shadow">
    <hgroup id="site-header">
    <a id="site-title" href="https://visibilityspots.github.io/blog"><h1>visibilityspots <i class="icon-dashboard"></i></h1></a>
        <p id="site-desc"> Linux & Open-Source enthusiast | Scouting | Longboarding </p>
    </hgroup>
    <form id="searchform" action="https://visibilityspots.github.io/blog/search.html" onsubmit="return (this.elements['q'].value.length > 0)">
	        <input id="searchbox" type="text" name="q" size="12" placeholder="search">
    </form>
    <nav>
        <ul id="nav-links">
                <li><a href="https://visibilityspots.github.io/blog/">Blog</a></li>
                <li><a href="https://visibilityspots.github.io/blog/pages/profile.html">Profile</a></li>
                <li><a href="https://visibilityspots.github.io/blog/pages/projects.html">Projects</a></li>
                <li><a href="https://visibilityspots.github.io/blog/pages/tools.html">Tools</a></li>
                <li><a href="https://visibilityspots.github.io/blog/pages/contact.html">Contact</a></li>
        </ul>
    </nav>
    Categories:
      <ul>
	<li><a href="https://visibilityspots.github.io/blog/category/android.html">android</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/apple.html">apple</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/automation.html">automation</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/cloud.html">cloud</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/conferences.html">conferences</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/containers.html">containers</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/home-automation.html">home-automation</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/linux.html">linux</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/networking.html">networking</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/other.html">other</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/php.html">php</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/puppet.html">puppet</a></li>
	<li><a href="https://visibilityspots.github.io/blog/category/security.html">security</a></li>
      </ul>
<footer id="site-info">
  <a href="http://creativecommons.org/licenses/by-nc/2.0/be/deed.nl">License</a> | 2009 - 2022 <a href="https://visibilityspots.github.io/blog">visibilityspots.github.io/blog</a> | Generated by <a href="http://getpelican.com/" target="pelican">Pelican</a> | Hosted at <a href="https://pages.github.com/" target="github pages">github pages</a> | <a href="https://visibilityspots.github.io/blog/feeds/all.atom.xml" rel="alternate">Atom</a> feed
</footer></header>
    <div id="post-container">
        <ol id="post-list">
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <a href="https://visibilityspots.github.io/blog/piaware.html" rel="bookmark"><h1>Piaware on a nomad cluster</h1></a>
<div><p>takes 0 minutes to read</p></div>                        <time class="post-time" datetime="2020-01-31T19:00:00+01:00" pubdate>
                            last modified at Fri 31 January 2020
                        </time>
                    </header>
                    <section class="post-content">
                        <p>A couple of years ago I stumbled on the <a href="https://flightaware.com/">flightaware</a> website and figured out you could capture radio signals from an airplane using a DVB-T dongle which can be bought for about EUR 15.</p>
<p>As this really triggered me to start monitoring planes above our head I bought myself such a device, hooked it up to a raspberry pi zero, installed the piaware software and started grabbing the messages and pushing the compiled positions through flightaware.</p>
<p>Through time I managed to upgrade my home lab towards a <a href="../nomad-arm-cluster.html">nomad cluster</a>. So I migrated my piaware setup to a nomad node and wrote a <a href="http://www.visibilityspots.com/documents/piaware/nomad.hcl">nomad job file</a> to run the docker image.</p>
<p>This was a great achievement in my cluster setup regarding the software. For the hardware I initially used a cheap <a href="https://shop.pimoroni.com/products/dvb-t-dongle-ideal-for-ads-b-real-time-plane-tracking">DVB-T</a> dongle but I wanted to get more planes and positions so I invested into better gear.</p>
<p>After saving enough by skipping the weekly wok days at work I ordered myself a <a href="https://thepihut.com/products/flightaware-1090mhz-ads-b-antenna-66cm-26in">1090MHz ADS-B N-Type</a> antenna in combination with the <a href="https://thepihut.com/products/flightaware-pro-stick-plus-usb-sdr-ads-b-receiver">Flightaware Pro Stick Plus</a>. To attach the two together I also got myself a <a href="https://www.amazon.com/gp/product/B01FVWCKKE/ref=ppx_yo_dt_b_asin_title_o02_s00?ie=UTF8&amp;psc=1">15m antenna RF coaxial cable</a>.</p>
<p>As a first test setup I used a large bamboo pole which I hooked up into the garden as you can see;</p>
<p><img alt="bamboo" src="../../images/piaware/bamboo.jpg"></p>
<p>The pi was placed inside of the garage and connected through the wireless network. Unfortunately I had a bad reception and installed a powerline based AP to have a stronger signal in the garage. But this setup suffered from outages from time to time. Causing the pi to lose connection and therefore many messages got lost :(</p>
<p>Some auto reboots every now and then solved the connectivity issues as a quick 'ducktaped' fix but I wasn't quite happy with it.</p>
<p>The temporary solution of the bamboo stick stood for about a year. Since I didn't wanted (neither was allowed by my girlfriend) to drill a hole through the roof. But I figured out our central heating unit has a fresh air outlet I could use to go to the roof.</p>
<p>So once equipped with a fancy new pole made by my brother I went for it and installed the antenna on the roof and the pi indoors attached with a network cable instead of the wifi;</p>
<p><img alt="roof" src="../../images/piaware/roof.jpg"></p>
<p>I then made some time to update the docker container images I used from <a href="https://github.com/mikenye/docker-piaware">Mike Nye</a> and create some pull requests. Once he merged those I upgraded my nomad job file and running on the latest available stable version of piaware in a container!</p>
<p>The move of the antenna together with a stable connection was a big success seen my stats increased significantly! Still the 'Klitsberg' nearby our home is blocking some signals from that direction unfortunately.. Maybe someday I could set up an antenna on top of that hill who knows.</p>
<p>A few days after I upgraded I figured Mike released a <a href="https://github.com/mikenye/docker-flightradar24">docker-fr24feed</a> container image which works in tandem with the docker-piaware one. So I went for it adjusted the nomad job file and now I'm not only pushing messages towards <a href="https://flightaware.com/adsb/stats/user/visibilityspots#stats-89862">flightaware</a> but also towards <a href="https://www.flightradar24.com/account/feed-stats/?id=18592">flightradar24</a></p>
<p>Another thing I still need to figure out is the adjustment of the <a href="https://discussions.flightaware.com/t/thoughts-on-optimizing-gain/44482/2">gain</a> which could me bring even better statistics as today :)</p>
<p>Also since becoming a business member on both platforms because being a feeder could open up a way to an API I could start using to setup my wemos based <a href="https://blog.squix.org/2016/07/esp8266-based-plane-spotter-how-to.html">plane spotter</a> in the future!</p>
                    </section>
                    <hr/>
                    <aside class="post-meta">
                        <p>Category: <a href="https://visibilityspots.github.io/blog/category/other.html">other</a></p>
                        <p>Tags: <a href="https://visibilityspots.github.io/blog/tag/piaware.html">piaware</a>, <a href="https://visibilityspots.github.io/blog/tag/flightaware.html">flightaware</a>, <a href="https://visibilityspots.github.io/blog/tag/dump1090.html">dump1090</a>, <a href="https://visibilityspots.github.io/blog/tag/adb-b.html">ADB-B</a>, <a href="https://visibilityspots.github.io/blog/tag/nomad.html">nomad</a>, <a href="https://visibilityspots.github.io/blog/tag/docker.html">docker</a>, <a href="https://visibilityspots.github.io/blog/tag/flight.html">flight</a>, <a href="https://visibilityspots.github.io/blog/tag/radar.html">radar</a>, <a href="https://visibilityspots.github.io/blog/tag/24.html">24</a>, <a href="https://visibilityspots.github.io/blog/tag/flightradar24.html">flightradar24</a>, <a href="https://visibilityspots.github.io/blog/tag/dvb-t.html">DVB-T</a>, <a href="https://visibilityspots.github.io/blog/tag/readsb.html">readsb</a>, <a href="https://visibilityspots.github.io/blog/tag/radarbox.html">radarbox</a>, <a href="https://visibilityspots.github.io/blog/tag/planefinder.html">planefinder</a>, <a href="https://visibilityspots.github.io/blog/tag/adsbexchange.html">adsbexchange</a>, </p>
                    </aside>
                    <hr/>
<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'visibilityspots';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
                </article>
            </li>
        </ol>
    </div>
        </div>

        <script src="https://visibilityspots.github.io/blog/theme/js/main.js"></script>
    </body>
</html>